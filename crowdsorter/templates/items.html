{% extends "layout.html" %}

{% block title %}{{ super() }} | {{ collection['name'] }}{% endblock %}

{% block content %}
{{ super() }}
    <div class="jumbotron text-center">
        <h2 class="title">{{ collection['name'] }}</h2>
    </div>

    <div class="container">
        <div class="col-sm-8 col-sm-offset-2">

            <div class="row">
                <ul class="list-group">
                    <div class="list-group-item">
                        <div class="left">
                            Items: {{ collection['item_count'] or 0 }}
                        </div>
                        <div class="right">
                            Votes: {{ collection['vote_count'] or 0 }}
                        </div>
                    </div>
                </ul>
            </div>

            <div class="row center">
                <a class="btn btn-primary" href="/{{ collection['code'] }}/vote" role="button">
                    Vote on Items
                </a>
            </div>

        </div>
    </div>
    <hr>
    <div class="container">
        <div class="col-sm-8 col-sm-offset-2">

            <div class="row">
                <div class="list-group">
                    {% set scale = (collection['scores']|length - 1) / 95 %}
                    {% for item in collection['scores'] %}
                    <div class="list-group-item">
                        <div class="left">
                            {{ item['name'] }}
                        </div>
                        <div class="right">
                            {% if item['points'] > 0 %}
                            <div class="bar-pos" style="width: {{ item['points'] / +scale }}%; opacity: {{ item['confidence'] }};"></div>
                            {% else %}
                            <div class="bar-neg" style="width: {{ item['points'] / -scale }}%; opacity: {{ item['confidence'] }};"></div>

                            {% endif %}
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>

            {% if not collection['locked'] %}
            <div class="row">
                <form method="post" class="input-group input-group-lg">
                    <input type="text" class="form-control input-lg" name="name" placeholder="New Item Name">
                    <span class="input-group-btn">
                        <button type="submit" class="btn btn-success" title="Add an item">
                            <i class="glyphicon glyphicon-plus-sign"></i>
                        </button>
                    </span>
                </form>
            </div>
            {% endif %}

        </div>
    </div>
    <br>

    {% include "footer.html" %}
{% endblock %}
